<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>

<sqlMap>

<typeAlias alias="borrowDto" type="product.bean.BorrowDto"/>
<typeAlias alias="registerDto" type="product.bean.RegisterDto"/>
<typeAlias alias="investDto" type="product.bean.InvestDto"/>

<select id="maxno" resultClass="int" parameterClass="int">
	select max(no) from borrow where memno=#memno#
</select>

<select id="registerReady" resultClass="borrowDto" parameterClass="java.util.Map"> 
	select * from borrow where no=#no#
</select>

<select id="productborrow" resultClass="String">
	select count(*) from product
</select>

<select id="productList" resultClass="registerDto">
	select * from product
</select>

<select id="productone" resultClass="registerDto" parameterClass="registerDto">
	select * from product where p_code=#p_code#
</select>

<select id="contentlist" resultClass="registerDto" parameterClass="String">
	select * from p_content where p_code=#p_code#
</select>

<select id="filelist" resultClass="registerDto" parameterClass="String">
	select * from p_file where p_code=#p_code#
</select>

<insert id="inputcontent" parameterClass="registerDto">
	insert into p_content values(content_seq.nextval,#p_code#,#p_content#,sysdate)
</insert>

<insert id="inputfile" parameterClass="registerDto">
	insert into p_file values(#p_code#,#p_file#,sysdate)
</insert>

<insert id="investstart" parameterClass="investDto">	
	insert into invest values(invest_seq.nextval,#i_memname#,#i_memnum#,#i_pname#,#i_pcode#,#i_repayday#,
								#i_times#,#i_profit#,#i_invest#,#i_way#,sysdate,'doing')
</insert>

<insert id="basicborrow" parameterClass="borrowDto">
	insert into borrow values(BORROW_NO.NEXTVAL,#memname#,#membirth#,#mememail#,#memphone#,#memno#,#br_sum#,#br_way#,#br_term#,
								#br_category#,#br_work#,#br_job#,#br_employ#,#br_ycomein#,
								#br_mavg#,#br_mrepay#,#br_mlockpay#,#br_object#,#br_hopeday#,
								sysdate,'none')
</insert>

<insert id="productinput" parameterClass="registerDto">
	insert into product values(PRODUCT_SEQ.nextval,#p_category#,#p_name#,#p_code#,#p_price#,
								#p_content#,'test','0','0',#p_purpose#,#p_way#,#p_rate#,
								#p_term#,#p_funding#,#p_repayday#,'doing',#p_file#,#p_memno#,#p_mrepay#)
</insert>

<delete id="cancleborrow" parameterClass="java.util.Map">
	delete from borrow where no=#no# and memno=#memno#
</delete>


</sqlMap>