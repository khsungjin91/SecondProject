<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap> 

<typeAlias alias="mem" type="sign.bean.memberDto"/>
<typeAlias alias="memInfo" type="setting.bean.SettingDto"/>
<typeAlias alias="borrow" type="product.bean.BorrowDto"/>
<typeAlias alias="evaluation" type="manager.bean.evaluationDto"/>

	<!-- 일반회원의 이름,메일,가입날짜 조회 -->
	<select id ="m_member" resultClass="mem" >
		select nickname, email,join from member	where confirm=0		
	</select>
	
	<!-- 일반회원 검색 -->
	<!-- parameterClass: 받아올값-->
	<select id ="noconfirm_search" resultClass="mem" parameterClass="java.util.Map" >
		select nickname, email,join from member 
		where $noconfirm$ like '%' || #search# || '%' 
		and confirm=0
	</select>

	<!-- 인증회원의 전체 조회 -->
	<select id ="m_memberInfo" resultClass="memInfo">
		select i.name,i.birth,i.gender,i.mobilenum,i.bankcode,i.bankaccnum,i.address,i.randomacc, m.email,m.join
		from member m ,memberinfo i
		where m.no=i.no 
	</select>
	
	<!-- 인증회원 검색 -->
	<select id="confirm_search" resultClass="memInfo" parameterClass="java.util.Map">
		select i.name,i.birth,i.gender,i.mobilenum,i.bankcode,i.bankaccnum,i.address,i.randomacc, m.email,m.join 
		from member m,memberinfo i 
		where $confirm$ like '%'|| #search# ||'%'
		and m.no=i.no
	</select>
	
	<!-- 성진작품 -->
	<select id="borrowlist" resultClass="borrow">
	select * from borrow where success='success' order by br_date desc
	</select>
	
	<!-- 성진작품 -->
	<update id="confirmUp" parameterClass="java.util.Map">
		update member set confirm=#on# where email=#email# 
	</update>
	
	<!-- 심사list -->
	<select id="evaluation_list" resultClass="evaluation">
		select * from evaluationlist  
	</select>
	
	<!-- 심사평 insert -->
	<insert id="evaluation_write" parameterClass="evaluation">
		insert into evaluation	(e_memid,
								e_memname,
								e_document,
								e_doccount,
								e_result)
							values(#e_memid#,
								#e_memname#,
								#e_document#,
								#e_doccount#,
								#e_result#)
	</insert>
	
	
</sqlMap>