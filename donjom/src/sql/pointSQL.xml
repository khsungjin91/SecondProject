<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>

<sqlMap>

<typeAlias alias="pointDto" type="point.bean.PointDto"/>
<typeAlias alias="investDto" type="product.bean.InvestDto"/>

<select id="get_total" resultClass="pointDto" parameterClass="int">
	select total_ch,total_re from memprice where no=#no#
</select>

<insert id="ch_noinput" parameterClass="pointDto">
	insert into charging values(#no#,#ch_price#,sysdate)
</insert>

<insert id="re_noinput" parameterClass="pointDto">
	insert into refunds values(#no#,#re_price#,sysdate)
</insert>

<insert id="total_price" parameterClass="int">
	insert into memprice values(#no#,0,0)
</insert>

<update id="input_total_ch" parameterClass="pointDto">
	update memprice set total_ch=total_ch + #total_ch# where no=#no#
</update>

<update id="input_total_re" parameterClass="pointDto">
	update memprice set total_re=total_re + #total_re# where no=#no#
</update>

<update id="input_invest" parameterClass="investDto">
	update memprice set total_ch= total_ch - #i_invest# where no = #i_memnum#
</update>



</sqlMap>